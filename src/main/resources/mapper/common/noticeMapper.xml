<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ksinfo.blind.common.mapper.NoticeMapper">
    <!--[메모] [주의]본 NoticeMapper는 유저만 대상으로 합니다. -->
    <!--[메모] [주의]관리자용 NoticeMapper는 "com.ksinfo.blind.manage.mapper.ManageNoticeMapper"를 봐주십시오.  -->

    <!--메모 유저전용 공지사항List리턴문. 공지하기로 확정한 공지사항만 리턴한다. -->
    <!--메모 notice_blind_flag 0 : 전체(공지+비공지)출력 / 1:비공지만 출력.-->
    <select id="getNoticeListForUsers"
            resultType="com.ksinfo.blind.common.vo.NoticeVO">
        SELECT  nm.notice_title AS noticeTitle,
        ntm.notice_type_name AS noticeTypeName,
        um.user_nickname AS userNickname,
        nm.notice_contents AS noticeContents,

        nm.notice_website_url AS noticeWebsiteUrl,
        nm.post_file_id AS postFileId,
        to_char(nm.notice_create_date,'YYYY-MM-DD')  AS noticeCreateDate,
        to_char(nm.notice_update_date,'YYYY-MM-DD')  AS noticeUpdateDate

        FROM blind.notice_mgt as nm

        LEFT Join blind.notice_type_mst as ntm
        ON nm.notice_type_code = ntm.notice_type_code

        LEFT Join blind.user_mgt as um
        ON nm.user_id = um.user_id

        WHERE ntm.logical_del_flag = '0'
        AND nm.notice_blind_flag ='0'
        ORDER BY nm.notice_id;
    </select>

</mapper>